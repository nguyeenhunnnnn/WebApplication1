@model IEnumerable<WebApplication1.Models.ViewModels.UngTuyenViewModel>

@using WebApplication1.Models

@{
    ViewData["Title"] = "Hồ Sơ ";
    ViewData["UserRole"] = User.FindFirst("VaiTro")?.Value; // nếu bạn lưu vai trò bằng claim "VaiTro"
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="~/css/styleDangTin.css" />
    <link rel="stylesheet" href="~/css/StyleSidebar.css" />
    <link rel="stylesheet" href="~/css/styleQlbd.css" />
    <title>HUNO - Hồ sơ Tuyển Dụng</title>

</head>
<div class="container">
    <!-- Sidebar -->
    @await Html.PartialAsync("_SidebarPartial", new
        {
            Controller = ViewContext.RouteData.Values["controller"]?.ToString(),
            Action = ViewContext.RouteData.Values["action"]?.ToString(),
            VaiTro = User.FindFirst("VaiTro")?.Value
        })

    <!-- Main Content -->
    <div class="main-content">

        <!-- Content Area -->
        <div class="content" style="width:140%">

            <div class="search-container">
                <div class="section-title">
                    <form asp-action="QuanLyUngTuyen" method="get">
                        <a href="?trangthai=Chờ duyệt">Hồ Sơ Chờ Duyệt</a>
                        <a href="?trangthai=Chấp nhận">Hồ Sơ Chấp Nhận</a>
                        <a href="?trangthai=Từ chối">Hồ Sơ Từ Chối</a>
                    </form>

                </div>
                <form method="post" asp-action="SearchUT">

                    <div class="search-row">
                        <div class="search-field">
                            <label class="search-label">Tiêu đề</label>
                            <input name="tieude" type="text" class="search-input" placeholder="Nhập từ khóa">
                        </div>
                        <div class="search-field">
                            <label class="search-label">Ngày ứng tuyển</label>
                            <div class="date-picker">
                                <input name="ThoiGian" type="date" class="search-select" placeholder="Chọn">
                                <span class="date-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <rect x="3" y="6" width="18" height="15" rx="2" stroke="currentColor" stroke-width="2" />
                                        <path d="M3 10H21" stroke="currentColor" stroke-width="2" />
                                        <path d="M8 3V7" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                        <path d="M16 3V7" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                </span>
                            </div>
                        </div>
                        <button class="search-btn" type="submit">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Tìm
                        </button>
                    </div>
                </form>
            </div>

            <!-- Results section -->
            <div class="results-container">
                <table>
                    <thead>
                        <tr>
                            <th>Bài đăng</th>
                            <th>Người đăng</th>
                            <th>Ngày ứng tuyển</th>
                            <th>Trạng thái</th>
                            
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {

                            <tr>
                                <td>@item.TieuDeBaiDang</td>
                                <td>@item.phuhuynhName</td>
                                <td class="ellipsis">@item.NgayUngTuyen.ToString("dd/MM/yyyy")</td>
                                <td>@item.TrangThai</td>
                                <td class="action-cell">
                                    <form asp-action="Index" asp-controller="Chat" method="get">
                                        <input type="hidden" name="receiverId" value="@item.PhuHuynhId" />
                                        <input type="hidden" name="baiDangId" value="@item.MaBaiDang" />
                                        <button type="submit" class="action-btn">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M8 10.5H16" stroke="#8b3dff" stroke-width="1.5" stroke-linecap="round"></path> <path d="M8 14H13.5" stroke="#8b3dff" stroke-width="1.5" stroke-linecap="round"></path> <path d="M17 3.33782C15.5291 2.48697 13.8214 2 12 2C6.47715 2 2 6.47715 2 12C2 13.5997 2.37562 15.1116 3.04346 16.4525C3.22094 16.8088 3.28001 17.2161 3.17712 17.6006L2.58151 19.8267C2.32295 20.793 3.20701 21.677 4.17335 21.4185L6.39939 20.8229C6.78393 20.72 7.19121 20.7791 7.54753 20.9565C8.88837 21.6244 10.4003 22 12 22C17.5228 22 22 17.5228 22 12C22 10.1786 21.513 8.47087 20.6622 7" stroke="#8b3dff" stroke-width="1.5" stroke-linecap="round"></path> </g></svg>
                                        </button>
                                    </form>
                                    <form asp-action="HuyUngTuyen" asp-controller="HoSo" method="post">
                                        <button class="action-btn" type="submit" name="baiDangId" value="@item.MaBaiDang">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                                <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </form>

                                </td>
                            </tr>

                        }

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script>
      // Tab switching functionality
    /*  const tabs = document.querySelectorAll('.tab');
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
        });
      });
      /*/


   

      // Export button functionality
      const exportBtn = document.querySelector('.export-btn');
      exportBtn.addEventListener('click', () => {
        // In a real implementation, you would export data here
        alert('Export functionality would be implemented here');
      });

      // Row action buttons
      const actionBtns = document.querySelectorAll('.action-btn');
      actionBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
          const action = e.currentTarget.querySelector('svg').innerHTML.includes('plus') ? 'view' : 'delete';
          const row = e.currentTarget.closest('tr');
          const position = row.cells[0].textContent;

          if (action === 'view') {
            alert(`Viewing details for ${position}`);
          } else {
            if (confirm(`Are you sure you want to delete the job posting for ${position}?`)) {
              alert(`Deleted job posting for ${position}`);
            }
          }
        });
      });
</script>
</html>

